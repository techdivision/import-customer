{
  "shortcuts": {
    "general": {
      "customer": {
        "delete": [
          "general/general/global-data",
          "general/general/move-files",
          "general/customer/delete"
        ],
        "replace": [
          "general/general/global-data",
          "general/general/move-files",
          "general/general/cache-warmer",
          "general/customer/replace",
          "general/customer/replace.address"
        ],
        "add-update": [
          "general/general/global-data",
          "general/general/move-files",
          "general/general/cache-warmer",
          "general/customer/add-update",
          "general/customer/add-update.address"
        ]
      }
    }
  },
  "operations": {
    "general": {
      "customer": [
        {
          "name": "validate",
          "plugins": [
            {
              "id": "import.plugin.subject",
              "listeners": [
                {
                  "plugin.process.success": [
                    "import.listener.stop.validation"
                  ]
                }
              ],
              "subjects": [
                {
                  "id": "import.subject.validator",
                  "create-imported-file": false,
                  "file-resolver": {
                    "prefix": "customer-import"
                  },
                  "listeners": [
                    {
                      "subject.artefact.header.row.process.start": [
                        "import.listener.validate.header.row"
                      ]
                    }
                  ],
                  "params" : {
                    "custom-validations" : {
                      "email" :  [ "/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/" ]
                    }
                  },
                  "observers": [
                    {
                      "import": [
                        "import_product.observer.composite.base.validate"
                      ]
                    }
                  ],
                  "callbacks": [
                    {
                      "email": [ "import.callback.custom.regex.validator" ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "delete",
          "plugins": [
            {
              "id": "import.plugin.subject",
              "subjects": [
                {
                  "id": "import_customer.subject.bunch",
                  "file-resolver": {
                    "prefix": "customer-import"
                  },
                  "observers": [
                    {
                      "import": [
                        "import_customer.observer.clear.customer"
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "replace",
          "plugins": [
            {
              "id": "import.plugin.subject",
              "subjects": [
                {
                  "id": "import_customer.subject.bunch",
                  "file-resolver": {
                    "prefix": "customer-import"
                  },
                  "observers": [
                    {
                      "import": [
                        "import_customer.observer.composite.replace"
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "replace.address",
          "plugins": [
            {
              "id": "import.plugin.subject",
              "subjects": [
                {
                  "id": "import_customer_address.subject.bunch",
                  "file-resolver": {
                    "prefix": "customer-import-address"
                  },
                  "observers": [
                    {
                      "import": [
                        "import_customer.observer.composite.address.replace"
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "add-update",
          "plugins": [
            {
              "id": "import.plugin.subject",
              "subjects": [
                {
                  "id": "import_customer.subject.bunch",
                  "file-resolver": {
                    "prefix": "customer-import"
                  },
                  "observers": [
                    {
                      "import": [
                        "import_customer.observer.composite.add_update"
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "add-update.address",
          "plugins": [
            {
              "id": "import.plugin.subject",
              "subjects": [
                {
                  "id": "import_customer_address.subject.bunch",
                  "file-resolver": {
                    "prefix": "customer-import-address"
                  },
                  "observers": [
                    {
                      "import": [
                        "import_customer.observer.composite.address.add_update"
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  }
}